(function(t){function e(e){for(var o,r,i=e[0],l=e[1],c=e[2],u=0,p=[];u<i.length;u++)r=i[u],n[r]&&p.push(n[r][0]),n[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},s=[];function r(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"8b907bfe"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise(function(e,o){a=n[t]=[e,o]});e.push(a[2]=o);var s,l=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(t),s=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+o+": "+s+")");r.type=o,r.request=s,a[1](r)}n[t]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,l.appendChild(c)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0461":function(t,e,a){"use strict";var o=a("1ab2"),n=a.n(o);n.a},1:function(t,e){},"1ab2":function(t,e,a){},2:function(t,e){},3:function(t,e){},3151:function(t,e,a){"use strict";var o=a("b919"),n=a.n(o);n.a},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],r=(a("5c0b"),a("2877")),i={},l=Object(r["a"])(i,n,s,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,u=a("8c4f"),d=a("28dd"),p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{attrs:{alt:"logo",width:"100",src:a("cf05")}}),o("h1",[t._v("trustnote开源钱包")]),o("mt-button",{attrs:{type:"primary"},on:{click:t.MakeClicked}},[t._v("创建钱包")]),o("p"),o("mt-button",{attrs:{type:"primary"},on:{click:t.ImportClicked}},[t._v("导入钱包")])],1)},f=[],m={methods:{MakeClicked:function(t){console.log(t),this.$router.push("/create")},ImportClicked:function(t){console.log(t),this.$router.push("/import")}},created:function(){var t=window.localStorage,e=t.getItem("private_key");null!=e&&(console.log("privatekey!",e),window.location.href="/wallet",this.$router.push("/wallet"))}},v=m,h=(a("b590"),Object(r["a"])(v,p,f,!1,null,"04c35d4a",null));h.options.__file="Home.vue";var y=h.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("请把助记词抄在纸上")]),a("p",[t._v(t._s(t.word))]),a("mt-button",{attrs:{type:"primary"},on:{click:t.ImportClicked}},[t._v("我已备份")])],1)},b=[],g=a("5bf2"),w={data:function(){return{word:""}},methods:{ImportClicked:function(t){console.log(t),this.$router.push({path:"/import",name:"import"})}},mounted:function(){var t=g.mnemonic();this.word=t}},k=w,x=(a("7040"),Object(r["a"])(k,_,b,!1,null,"402cf3dc",null));x.options.__file="Create.vue";var S=x.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("输入助记词")]),a("p",[t._v("单词之间需要有空格")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.word,expression:"word"}],domProps:{value:t.word},on:{input:function(e){e.target.composing||(t.word=e.target.value)}}}),a("mt-button",{attrs:{type:"primary"},on:{click:t.ImportClicked}},[t._v("立刻导入")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full mask"}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full"},[t._m(0),a("div",{staticStyle:{position:"absolute",left:"50%",top:"55%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[a("mt-spinner",{staticStyle:{margin:"20px auto"},attrs:{type:"fading-circle"}})],1)])])])],1)},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"absolute",left:"50%",top:"45%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[t._v("正在导入")])])])}],I=(a("28a5"),a("76a0")),O=a.n(I),M=a("5bf2"),T={data:function(){return{display:!1,word:"",private_key:"",public_key:"",wallet_public_key:"",address:""}},methods:{ImportClicked:function(t){var e=this;if(console.log(t),12!=this.word.split(" ").length)return Object(I["MessageBox"])("提示","助记词长度不正确"),!1;this.display=!0,setTimeout(function(){e.private_key=M.xPrivKey(e.word),e.public_key=M.xPubKey(e.private_key),e.wallet_public_key=M.walletPubKey(e.private_key,0),e.address=M.walletAddress(e.wallet_public_key,0,0);var t=window.localStorage;t.setItem("private_key",e.private_key),t.setItem("public_key",e.public_key),t.setItem("wallet_public_key",e.wallet_public_key),t.setItem("address",e.address),e.$router.push({path:"/wallet",name:"wallet"})},2e3)}},mounted:function(){}},j=T,P=(a("f077"),Object(r["a"])(j,$,C,!1,null,"7f06c0b8",null));P.options.__file="Import.vue";var E=P.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"center"},[a("span",{staticClass:"balance"},[t._v(t._s(t.balance))]),t._v(" TTT")]),a("p",{staticClass:"address"},[t._v(t._s(t.address))]),a("mt-button",{attrs:{type:"primary"},on:{click:t.PaymentClicked}},[t._v("转账")]),a("p"),a("mt-button",{attrs:{type:"primary"},on:{click:t.HistoryClicked}},[t._v("记录")])],1)},H=[],J=(a("5bf2"),{data:function(){return{balance:"",private_key:"",public_key:"",wallet_public_key:"",address:""}},methods:{PaymentClicked:function(t){console.log(t),this.$router.push("/payment")},HistoryClicked:function(t){this.$router.push("/history")}},created:function(){var t=window.localStorage,e=t.getItem("private_key");null==e&&(console.log("privatekey!",e),window.location.href="/",this.$router.push("/"))},mounted:function(){var t=this,e=window.localStorage;this.private_key=e.getItem("private_key"),this.public_key=e.getItem("public_key"),this.wallet_public_key=e.getItem("wallet_public_key"),this.address=e.getItem("address");var a=e.getItem("is_registered");if(null==a){var o="http://150.109.57.242:6001/api/v1/account/register";this.$http.post(o,{pubkey:this.wallet_public_key},{emulateJSON:!1}).then(function(t){}).catch(function(t){}),e.setItem("is_registered",!0)}o="http://150.109.57.242:6001/api/v1/asset/balance/"+this.address+"/TTT";this.$http.get(o).then(function(e){var a=e.body;console.log("data:",a.data.stable),t.balance=(a.data.stable+a.data.pending)/1e6},function(t){})}}),B=J,D=(a("3151"),Object(r["a"])(B,N,H,!1,null,"0f241c0b",null));D.options.__file="Wallet.vue";var A=D.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mt-header",{attrs:{title:"转账"}},[a("router-link",{attrs:{slot:"left",to:"/wallet"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)],1),a("mt-field",{attrs:{label:"地址",state:t.state.to_address,placeholder:"输入转账地址"},model:{value:t.to_address,callback:function(e){t.to_address=e},expression:"to_address"}}),a("mt-field",{attrs:{label:"金额",type:"number",state:t.state.amount,placeholder:"输入转账金额"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),a("mt-field",{attrs:{label:"信息",type:"textarea",placeholder:"输入转账信息"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),a("p",{staticClass:"text"},[t._v(t._s(t.text))]),a("mt-button",{attrs:{type:"primary"},on:{click:t.PaymentClicked}},[t._v("支付")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full mask"}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full"},[t._m(0),a("div",{staticStyle:{position:"absolute",left:"50%",top:"55%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[a("mt-spinner",{staticStyle:{margin:"20px auto"},attrs:{type:"fading-circle"}})],1)])])])],1)},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"absolute",left:"50%",top:"45%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[t._v("正在支付")])])])}],q=a("5bf2"),G={data:function(){return{display:!1,alertMSG:"",to_address:"",private_key:"",public_key:"",wallet_public_key:"",address:"",amount:"",message:"",text:"",state:{to_address:"",amount:""}}},watch:{to_address:function(t,e){32!=t.length?this.state.to_address="error":this.state.to_address="success"},amount:function(t,e){this.state.amount=t>0?"success":"error"}},methods:{PaymentClicked:function(t){var e=this,a=this;this.display=!0,console.log(t);var o="http://150.109.57.242:6001/api/v1/asset/transfer";this.$http.post(o,{asset:"TTT",payer:this.address,message:this.message,outputs:[{address:this.to_address,amount:1e6*parseFloat(this.amount)}]},{emulateJSON:!1}).then(function(t){if(console.log("payment:",t.body),0==t.body.errMsg.indexOf("not enough asset")&&I["MessageBox"].alert("余额不足！").then(function(t){e.display=!1}),"success"==t.body.errMsg){console.log("sign!!!");var o=t.body.data.b64_to_sign,n=t.body.data.txid,s=window.localStorage,r=s.getItem("private_key"),i=q.sign(o,r,"m/44'/0'/0'/0/0");console.log("sig:",i);var l="http://150.109.57.242:6001/api/v1/asset/sign";a.$http.post(l,{txid:n,sig:i},{emulateJSON:!1}).then(function(t){console.log("return:",t.body),"success"==t.body.errMsg&&(console.log("unit:",t.body.data.unit),I["MessageBox"].alert("支付成功！").then(function(t){window.location.href="/",e.$router.push("/")}))}).catch(function(t){})}}).catch(function(t){})}},mounted:function(){var t=window.localStorage;this.private_key=t.getItem("private_key"),this.address=t.getItem("address")}},L=G,W=(a("c9dc"),Object(r["a"])(L,F,K,!1,null,"6bcb417a",null));W.options.__file="Payment.vue";var Y=W.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mt-header",{attrs:{title:"交易记录"}},[a("router-link",{attrs:{slot:"left",to:"/wallet"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)],1),t._l(t.list,function(t){return a("div",{key:t.index,staticStyle:{"text-align":"left"}},[a("mt-cell",{attrs:{title:t.time,value:t.value}})],1)})],2)},Q=[],R=(a("ac6a"),a("5bf2"),{data:function(){return{list:[],address:""}},methods:{PaymentClicked:function(t){console.log(t),this.$router.push("/payment")},HistoryClicked:function(t){this.$router.push("/history")}},created:function(){var t=window.localStorage,e=t.getItem("private_key");null==e&&(console.log("privatekey!",e),window.location.href="/",this.$router.push("/"))},mounted:function(){var t=this,e=window.localStorage;this.address=e.getItem("address");var a="http://150.109.57.242:6001/api/v1/asset/txhistory/"+this.address+"/TTT/1/10";this.$http.get(a).then(function(e){var a=e.body;console.log("history:",a.data.history);var o=a.data.history;o.forEach(function(e){var a=e.unit,o=a.timestamp,n=new Date(1e3*o),s=n.getFullYear()+"-",r=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",i=(n.getDate()<10?"0"+n.getDate():n.getDate())+" ",l=(n.getHours()<10?"0"+n.getHours():n.getHours())+":",c=(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())+":",u=(n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds())+"",d="+",p=0;if(a.authors[0].address===t.address){d="-";var f=a.messages[a.messages.length-1].payload.outputs;f.forEach(function(e){e.address===t.address||(p=e.amount,t.list.push({time:s+r+i+l+c+u,value:d+p/1e6}))})}else{d="+",console.log("+",a.messages[a.messages.length-1]);f=a.messages[a.messages.length-1].payload.outputs;f.forEach(function(e){e.address===t.address&&(p=e.amount,t.list.push({time:s+r+i+l+c+u,value:d+parseFloat(p/1e6)}))})}})},function(t){})}}),U=R,V=(a("0461"),Object(r["a"])(U,z,Q,!1,null,"6be0bb1b",null));V.options.__file="History.vue";var X=V.exports,Z=a("9f7b");a("aa35");o["default"].use(O.a),o["default"].use(Z["a"]),o["default"].use(u["a"]),o["default"].use(d["a"]);var tt=new u["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:y},{path:"/create",name:"create",component:S},{path:"/import",name:"import",component:E},{path:"/wallet",name:"wallet",component:A},{path:"/payment",name:"payment",component:Y},{path:"/history",name:"history",component:X},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]});o["default"].config.productionTip=!1,new o["default"]({router:tt,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var o=a("5e27"),n=a.n(o);n.a},"5e27":function(t,e,a){},7040:function(t,e,a){"use strict";var o=a("88ab"),n=a.n(o);n.a},"7de5":function(t,e,a){},"88ab":function(t,e,a){},"96e1":function(t,e,a){},a8c5:function(t,e,a){},b590:function(t,e,a){"use strict";var o=a("a8c5"),n=a.n(o);n.a},b919:function(t,e,a){},c9dc:function(t,e,a){"use strict";var o=a("7de5"),n=a.n(o);n.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.ed31fa1f.png"},f077:function(t,e,a){"use strict";var o=a("96e1"),n=a.n(o);n.a}});
//# sourceMappingURL=app.a212ac81.js.map